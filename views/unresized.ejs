<!DOCTYPE html>
<html lang="en">
  <%- include('./head'); %>
  <body>
    <main class="gallery-wrapper">
      <section class="meta-data">
        <div>
          <p class="name"><%= imageSource %></p>
          <h4>Dimension.</h4>
          <p><%= height %>*<%= width %>Pixels</p>
          <h4>Original size.</h4>
          <p><%= Math.floor(size/1024) %> Kb</p>
          <h4>Converted size.</h4>
          <p><%= Math.floor(newsize/1024) %> Kb</p>
          <h4>Conversion.</h4>
          <p>You saved <%= Math.floor(((size-newsize)/size)*100) %>%</p>
          <h4>Timestamp.</h4>
          <p><%= Date.now() %></p>
          <a href="<%= imageSource %>">Download</a>
          <a onclick="history.back()">Back</a>
        </div>
      </section>
      <section class="image-container">
        <div class="frame"><img src="<%= imageSource %>" /></div>
      </section>
    </main>
    <script>
      let abc = new Image();
      // abc.src = {pharm}
      // abc.src = "../unresized/agba.webp"
      let image = document.querySelector("img");
      // console.log(abc.filesize);
      console.log(image.sizes);
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        font-family: poppins;
        box-sizing: border-box;
        /* border: solid 1px black; */
      }
      a {
        margin-top: 20px;
        display: block;
        color: orangered;
        text-decoration: underline;
        cursor: pointer;
      }
      p {
        font-size: 12px;
        font-weight: 300;
      }
      h4 {
        font-size: 10px;
        font-weight: 500;
        margin-top: 5px;
        margin-bottom: 5px;
        color: #aaa;
      }
      body {
        display: flex;
        color: white;
        height: 100vh;
        padding: 0;
        flex-direction: row-reverse;
        align-items: center;
        justify-content: center;
      }
      main {
        display: flex;
        flex-direction: row-reverse;
        align-items: center;
        max-height: 100vh;
        margin: 0;
      }

      section {
        min-width: 50vw;
        min-height: 100vh;
        padding: 20px;
      }
      .meta-data {
        background: #222222;
        height: 95vh;
        margin: 0;
        position: relative;
      }
      .image-container {
        padding-right: 0;
        /* padding-left: 10px; */
        background-image: linear-gradient(#eee, #aaa);
        height: 95vh;
        position: relative;
      }

      .name {
        font-size: 2rem;
        text-transform: capitalize;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
        max-width: calc(30vw - 45px);
      }
      .meta-data > div {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
      html {
        /* background-image: linear-gradient(#eee, #aaa); */
        /* height: 100%; */
      }

      img {
        border: solid 2px;
        border-bottom-color: #ffe;
        border-left-color: #eed;
        border-right-color: #eed;
        border-top-color: #ccb;
        max-height: 300px !important;
        max-width: 300px !important;
      }

      .frame {
        background-color: #ddc;
        border: solid 5vmin #eee;
        border-bottom-color: #fff;
        border-left-color: #eee;
        border-radius: 2px;
        border-right-color: #eee;
        border-top-color: #ddd;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.25) inset,
          0 5px 10px 5px rgba(0, 0, 0, 0.25);
        box-sizing: border-box;
        display: inline-block;
        top: 50%;
        left: 45%;
        max-width: 400px;
        /* overflow: hidden; */
        max-height: 400px;
        transform: translate(-50%, -50%);
        /* height: 80vh; */
        padding: 2vmin;
        position: relative;
        text-align: center;
      }
      .frame:before {
        border-radius: 2px;
        bottom: -2vmin;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.25) inset;
        content: "";
        left: -2vmin;
        position: absolute;
        right: -2vmin;
        top: -2vmin;
      }
      .frame:after {
        border-radius: 2px;
        bottom: -2.5vmin;
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.25);
        content: "";
        left: -2.5vmin;
        position: absolute;
        right: -2.5vmin;
        top: -2.5vmin;
      }

      @media (max-width: 480px) {
        main {
          display: flex;
          flex-direction: column-reverse;
          align-items: center;
          max-height: 100vh;
          margin: 0;
        }
        section {
          min-width: 100vw;
          min-height: 50vh;
          padding: 20px;
        }
        .meta-data {
          background: #222222;
          margin: 0;
          position: relative;
        }
        .image-container {
          padding-right: 0;
          background-image: linear-gradient(#eee, #aaa);
          position: relative;
        }
      }
    </style>
  </body>
</html>
